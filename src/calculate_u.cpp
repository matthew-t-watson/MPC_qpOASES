//
// Academic License - for use in teaching, academic research, and meeting
// course requirements at degree granting institutions only.  Not for
// government, commercial, or other organizational use.
// File: calculate_u.cpp
//
// MATLAB Coder version            : 4.0
// C/C++ source code generated on  : 08-Jan-2019 13:28:46
//

// Include Files
#include "calculate_u.h"

// Function Definitions

//
// r = zeros(numel(r_reduced)*(8/3),1);
//  for i=1:numel(r_reduced/3)
//      r((i-1)*8+(1:3)) = r_reduced((i-1)*3+(1:3));
//  end
// Arguments    : const real_T x[8]
//                const real_T r[9]
//                const real_T c[12]
//                real_T u[4]
// Return Type  : void
//
void calculate_u(const real_T x[8], const real_T r[9], const real_T c[12],
                 real_T u[4])
{
  int32_T i0;
  real_T a[4];
  int32_T i1;
  real_T b_a[4];
  static const real_T c_a[32] = { -0.88125647921141126, 0.88125647921140748,
    0.88125647921140771, -0.88125647921141126, -0.58366865227708842,
    -0.58366865227708675, -0.58366865227708886, -0.58366865227709219,
    -0.71739493117227682, -0.43043695870336579, 0.430436958703368,
    0.717394931172279, 0.65147663771587627, 0.65147663771587561,
    0.65147663771587716, 0.65147663771587849, -0.14655014318432585,
    0.14655014318432563, 0.1465501431843256, -0.14655014318432602,
    -0.34375628073589426, -0.34375628073589348, -0.34375628073589459,
    -0.34375628073589626, -0.0668567983050964, -0.040114078983057841,
    0.04011407898305791, 0.0668567983050965, 0.084816677244094668,
    0.084816677244094543, 0.084816677244094724, 0.084816677244094946 };

  static const real_T d_a[36] = { 0.68439522236122152, -0.68439522236121986,
    -0.68439522236122, 0.68439522236122152, 0.19883787193103625,
    0.19883787193103436, 0.1988378719310348, 0.19883787193103752,
    0.25106364175071616, 0.1506381850504297, -0.15063818505043047,
    -0.25106364175071672, -0.14692380453100781, 0.14692380453100681,
    0.14692380453100681, -0.14692380453100784, -0.22936376037692985,
    -0.22936376037693021, -0.22936376037693029, -0.22936376037693024,
    -0.12131481675204306, -0.072788890051225769, 0.072788890051226143,
    0.12131481675204334, 0.34378506138118686, -0.34378506138119563,
    -0.34378506138119563, 0.34378506138118675, 0.61419454072295843,
    0.6141945407229592, 0.61419454072295943, 0.61419454072295743,
    0.58764610617360424, 0.35258766370416322, -0.35258766370416228,
    -0.58764610617360469 };

  for (i0 = 0; i0 < 4; i0++) {
    a[i0] = 0.0;
    for (i1 = 0; i1 < 8; i1++) {
      a[i0] += c_a[i0 + (i1 << 2)] * x[i1];
    }

    b_a[i0] = 0.0;
    for (i1 = 0; i1 < 9; i1++) {
      b_a[i0] += d_a[i0 + (i1 << 2)] * r[i1];
    }

    u[i0] = (a[i0] + b_a[i0]) + c[i0];
  }
}

//
// Arguments    : void
// Return Type  : void
//
void calculate_u_initialize()
{
}

//
// File trailer for calculate_u.cpp
//
// [EOF]
//
